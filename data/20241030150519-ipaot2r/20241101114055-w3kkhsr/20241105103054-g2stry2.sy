{"ID":"20241105103054-g2stry2","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241105103054-g2stry2","title":"金丝雀发布","type":"doc","updated":"20241114161254"},"Children":[{"ID":"20241105103054-mlr5azb","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241105103054-mlr5azb","updated":"20241114161254"},"Children":[{"ID":"20241113170223-0z0a2w4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241113170223-0z0a2w4","updated":"20241113170223"},"Children":[{"ID":"20241113170223-eosjoi7","Type":"NodeParagraph","Properties":{"id":"20241113170223-eosjoi7","updated":"20241113170232"},"Children":[{"Type":"NodeText","Data":"提前准备工作"}]},{"ID":"20241113170237-g2yray8","Type":"NodeBlockquote","Properties":{"id":"20241113170237-g2yray8","updated":"20241113170239"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241113170239-xq4fbac","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241113170239-xq4fbac","updated":"20241113170242"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"https://www.kubesphere.io/zh/docs/v3.3/pluggable-components/service-mesh/\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241113170233-0d0ot9a","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241113170233-0d0ot9a","updated":"20241113170233"},"Children":[{"ID":"20241113170233-ubydrfm","Type":"NodeParagraph","Properties":{"id":"20241113170233-ubydrfm","updated":"20241114104914"},"Children":[{"Type":"NodeText","Data":"安装NGINX Ingress 控制器"}]},{"ID":"20241114104942-x55x4ti","Type":"NodeParagraph","Properties":{"id":"20241114104942-x55x4ti","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"在 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"KubeSphere"},{"Type":"NodeText","Data":" 中，启用 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"NGINX Ingress 控制器"},{"Type":"NodeText","Data":"可以通过以下步骤完成。通常在安装 KubeSphere 时，可以选择启用 NGINX Ingress 控制器，但如果需要手动开启或者重新配置，可以参考以下方法。"}]},{"ID":"20241114104942-6vm0281","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241114104942-6vm0281","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"方法 1: 在安装 KubeSphere 时启用 Ingress 控制器"}]},{"ID":"20241114104942-twb6ypy","Type":"NodeParagraph","Properties":{"id":"20241114104942-twb6ypy","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"如果你尚未安装 KubeSphere，可以通过自定义安装启用 NGINX Ingress 控制器："}]},{"ID":"20241114104942-7nh737l","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241114104942-7nh737l","updated":"20241114104942"},"Children":[{"ID":"20241114104942-rej8nbn","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241114104942-rej8nbn","updated":"20241114104942"},"Children":[{"ID":"20241114104942-iuk3a3g","Type":"NodeParagraph","Properties":{"id":"20241114104942-iuk3a3g","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"使用 KubeSphere 的安装脚本（例如 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"kk"},{"Type":"NodeText","Data":"​）时，在配置文件中设置 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"nginx-ingress-enabled"},{"Type":"NodeText","Data":"​ 为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"true"},{"Type":"NodeText","Data":"​。"}]}]},{"ID":"20241114104942-y68ufyi","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241114104942-y68ufyi","updated":"20241114104942"},"Children":[{"ID":"20241114104942-61vx5zq","Type":"NodeParagraph","Properties":{"id":"20241114104942-61vx5zq","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"安装完成后，Ingress 控制器会自动启用。"}]}]}]},{"ID":"20241114104942-0x3gbba","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241114104942-0x3gbba","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"方法 2: 手动部署 NGINX Ingress 控制器"}]},{"ID":"20241114104942-fve8y4k","Type":"NodeParagraph","Properties":{"id":"20241114104942-fve8y4k","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"如果已经安装 KubeSphere但没有启用 Ingress 控制器，可以手动部署："}]},{"ID":"20241114104942-75z374d","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241114104942-75z374d","updated":"20241114104942"},"Children":[{"ID":"20241114104942-uq6wcyy","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241114104942-uq6wcyy","updated":"20241114104942"},"Children":[{"ID":"20241114104942-mfhnhvn","Type":"NodeParagraph","Properties":{"id":"20241114104942-mfhnhvn","updated":"20241114104942"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"安装 NGINX Ingress 控制器"},{"Type":"NodeText","Data":"使用官方的 Kubernetes NGINX Ingress 控制器安装文件来安装："}]},{"ID":"20241114104942-44o6tds","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114104942-44o6tds","updated":"20241114104942"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/cloud/deploy.yaml\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241114104942-s6hum96","Type":"NodeParagraph","Properties":{"id":"20241114104942-s6hum96","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"该命令会在集群中部署 NGINX Ingress 控制器，默认会安装在 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"ingress-nginx"},{"Type":"NodeText","Data":"​ 命名空间中。"}]}]},{"ID":"20241114104942-y8xc9s0","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241114104942-y8xc9s0","updated":"20241114104942"},"Children":[{"ID":"20241114104942-ce02mfz","Type":"NodeParagraph","Properties":{"id":"20241114104942-ce02mfz","updated":"20241114104942"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"检查 NGINX Ingress 控制器的运行状态"},{"Type":"NodeText","Data":"运行以下命令确保 Ingress 控制器已经成功运行："}]},{"ID":"20241114104942-7v7ts16","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114104942-7v7ts16","updated":"20241114104942"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"kubectl get pods -n ingress-nginx\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241114104942-mdnkbz8","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241114104942-mdnkbz8","updated":"20241114104942"},"Children":[{"ID":"20241114104942-3u24te7","Type":"NodeParagraph","Properties":{"id":"20241114104942-3u24te7","updated":"20241114104942"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"配置 Ingress 控制器的服务类型"},{"Type":"NodeText","Data":"需要根据网络环境配置 Ingress 控制器服务的类型，通常可以选择 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"NodePort"},{"Type":"NodeText","Data":"​ 或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"LoadBalancer"},{"Type":"NodeText","Data":"​。"}]},{"ID":"20241114104942-uhvjxp9","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114104942-uhvjxp9","updated":"20241114104942"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"kubectl edit service ingress-nginx-controller -n ingress-nginx\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241114104942-bm8vyb7","Type":"NodeParagraph","Properties":{"id":"20241114104942-bm8vyb7","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"将服务类型改为 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"NodePort"},{"Type":"NodeText","Data":"​（对于裸机集群）或 "},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"LoadBalancer"},{"Type":"NodeText","Data":"​（对于云环境）。"}]}]}]},{"ID":"20241114104942-ce3fllb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241114104942-ce3fllb","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"方法 3: 在 KubeSphere 控制台中启用 NGINX Ingress"}]},{"ID":"20241114104942-8uibn4m","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241114104942-8uibn4m","updated":"20241114104942"},"Children":[{"ID":"20241114104942-w921sdu","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241114104942-w921sdu","updated":"20241114104942"},"Children":[{"ID":"20241114104942-oavuqum","Type":"NodeParagraph","Properties":{"id":"20241114104942-oavuqum","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"登录到 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"KubeSphere 控制台"},{"Type":"NodeText","Data":"，进入集群管理页面。"}]}]},{"ID":"20241114104942-a6aysir","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241114104942-a6aysir","updated":"20241114104942"},"Children":[{"ID":"20241114104942-f0hlwce","Type":"NodeParagraph","Properties":{"id":"20241114104942-f0hlwce","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"在集群设置中选择 "},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"组件"},{"Type":"NodeText","Data":"，然后找到 NGINX Ingress 控制器，选择启用。"}]}]}]},{"ID":"20241114104942-cykaokb","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241114104942-cykaokb","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"方法 4: 配置 KubeSphere 中的 Ingress 路由"}]},{"ID":"20241114104942-595lca0","Type":"NodeParagraph","Properties":{"id":"20241114104942-595lca0","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"KubeSphere 支持直接在控制台中配置 Ingress 路由。创建服务的 Ingress 时，可以在 KubeSphere 控制台指定服务和路径，KubeSphere 将自动生成对应的 Ingress 资源。"}]},{"ID":"20241114104942-7eb7lfr","Type":"NodeParagraph","Properties":{"id":"20241114104942-7eb7lfr","updated":"20241114104942"},"Children":[{"Type":"NodeText","Data":"通过以上方法，可以在 KubeSphere 中成功启用和配置 NGINX Ingress 控制器，并开始管理外部流"}]}]},{"ID":"20241114104915-rwgv9yf","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241114104915-rwgv9yf","updated":"20241114104915"},"Children":[{"ID":"20241114104915-hnyxoay","Type":"NodeParagraph","Properties":{"id":"20241114104915-hnyxoay","updated":"20241114155550"},"Children":[{"Type":"NodeText","Data":"离线下载"}]},{"ID":"20241114155554-3i734cn","Type":"NodeBlockquote","Properties":{"id":"20241114155554-3i734cn","updated":"20241114155556"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241114155556-eocaaua","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114155556-eocaaua","updated":"20241114155626"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"docker save -o ingress-nginx-controller.tar registry.k8s.io/ingress-nginx/controller:v1.3.1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241114155552-9il3k1h","Type":"NodeBlockquote","Properties":{"id":"20241114155552-9il3k1h","updated":"20241114155651"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241114155653-pwgz49e","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114155653-pwgz49e","updated":"20241114155743"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"docker save -o kube-webhook-certgen.tar registry.k8s.io/ingress-nginx/kube-webhook-certgen:v1.1.1\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241114155647-4zc78x1","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241114155647-4zc78x1","updated":"20241114155647"},"Children":[{"ID":"20241114155647-zhl5jrm","Type":"NodeParagraph","Properties":{"id":"20241114155647-zhl5jrm","updated":"20241114155825"},"Children":[{"Type":"NodeText","Data":"本地服务器加载离线镜像文件"}]},{"ID":"20241114155800-h2pl3m7","Type":"NodeBlockquote","Properties":{"id":"20241114155800-h2pl3m7","updated":"20241114155801"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241114155801-f1eu008","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114155801-f1eu008","updated":"20241114155834"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"docker load -i ingress-nginx-controller.tar\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241114155758-uybx52f","Type":"NodeBlockquote","Properties":{"id":"20241114155758-uybx52f","updated":"20241114155847"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241114155847-cejdpog","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114155847-cejdpog","updated":"20241114155859"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"docker load -i kube-webhook-certgen.tar\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241114155844-lle8jwh","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241114155844-lle8jwh","updated":"20241114161254"},"Children":[{"ID":"20241114155844-lj1g4er","Type":"NodeParagraph","Properties":{"id":"20241114155844-lj1g4er","updated":"20241114161246"},"Children":[{"Type":"NodeText","Data":"删除命名空间"}]},{"ID":"20241114161249-1v89syh","Type":"NodeBlockquote","Properties":{"id":"20241114161249-1v89syh","updated":"20241114161254"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241114161250-hfig9mx","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241114161250-hfig9mx","updated":"20241114161254"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"kubectl delete namespace ingress-nginx\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241114161247-3t42r0s","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20241114161247-3t42r0s","updated":"20241114161247"},"Children":[{"ID":"20241114161247-g5f98r5","Type":"NodeParagraph","Properties":{"id":"20241114161247-g5f98r5","updated":"20241114161247"},"Children":[{"Type":"NodeText","Data":"是否"}]}]},{"ID":"20241114161248-0ng0x77","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20241114161248-0ng0x77","updated":"20241114161248"},"Children":[{"ID":"20241114161248-caqvo8f","Type":"NodeParagraph","Properties":{"id":"20241114161248-caqvo8f","updated":"20241114161248"},"Children":[{"Type":"NodeText","Data":"是"}]}]}]},{"ID":"20241113170218-jjuk0yp","Type":"NodeParagraph","Properties":{"id":"20241113170218-jjuk0yp","updated":"20241114104907"}},{"ID":"20241114104905-6ichcv4","Type":"NodeParagraph","Properties":{"id":"20241114104905-6ichcv4","updated":"20241114104905"}}]}