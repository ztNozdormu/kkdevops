{"ID":"20241101114108-45uh7p7","Spec":"1","Type":"NodeDocument","Properties":{"id":"20241101114108-45uh7p7","title":"k8s服务器节点扩容缩容","type":"doc","updated":"20241101175046"},"Children":[{"ID":"20241101114108-5f4gsyf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20241101114108-5f4gsyf","updated":"20241101175046"},"Children":[{"Type":"NodeText","Data":"一、同步各服务器节点hostname配置"}]},{"ID":"20241101114223-69a3grv","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101114223-69a3grv","updated":"20241101161437"},"Children":[{"ID":"20241101114238-r8fy3t4","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241101114238-r8fy3t4","updated":"20241101114238"},"Children":[{"ID":"20241101114238-qa60uvx","Type":"NodeParagraph","Properties":{"id":"20241101114238-qa60uvx","updated":"20241101114320"},"Children":[{"Type":"NodeText","Data":"查看当前节点信息[一般在管理服务节点上操作]"}]},{"ID":"20241101114322-ddd5mlt","Type":"NodeBlockquote","Properties":{"id":"20241101114322-ddd5mlt","updated":"20241101114324"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101114324-1nid987","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101114324-1nid987","updated":"20241101114346"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"kubectl get node\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241101114425-88l0r4g","Type":"NodeParagraph","Properties":{"id":"20241101114425-88l0r4g","updated":"20241101114425"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"1730432663525"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/1730432663525-20241101114425-r0i670k.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]}]},{"ID":"20241101114349-rmh5yuv","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241101114349-rmh5yuv","updated":"20241101114349"},"Children":[{"ID":"20241101114349-i8hokwz","Type":"NodeParagraph","Properties":{"id":"20241101114349-i8hokwz","updated":"20241101115106"},"Children":[{"Type":"NodeText","Data":"查看已存在节点的hosts配置内容"}]},{"ID":"20241101115107-0dn71ck","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101115107-0dn71ck","updated":"20241101115230"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"注意：在已经存在的hosts节点相关内容上追加新节点hostname；然后每个节点都要同步更新。注意更新的时候不要把历史hosts其他内容覆盖了，其他内容可能是其他服务部署产生的\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101115023-yfjm63a","Type":"NodeBlockquote","Properties":{"id":"20241101115023-yfjm63a","updated":"20241101115025"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101115025-ak7w603","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101115025-ak7w603","updated":"20241101155514"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"192.168.1.230  k8s-master.cluster.local k8s-master\n192.168.1.229  k8s-node1.cluster.local k8s-node1\n192.168.1.228  k8s-node2.cluster.local k8s-node2\n192.168.1.230  lb.kubesphere.local\n192.168.1.108  k8s-node3  #新增节点\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241101114350-7lesuai","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241101114350-7lesuai","updated":"20241101114350"},"Children":[{"ID":"20241101114350-8s9cnm6","Type":"NodeParagraph","Properties":{"id":"20241101114350-8s9cnm6","updated":"20241101115506"},"Children":[{"Type":"NodeText","Data":"将上面内容copy到新节点hosts，其他节点hosts增加新节点配置"}]},{"ID":"20241101160206-o40xq0n","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101160206-o40xq0n","updated":"20241101160217"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"新节点ip  新节点hostname\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101160159-ddd0lg5","Type":"NodeBlockquote","Properties":{"id":"20241101160159-ddd0lg5","updated":"20241101160201"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101160201-fa700km","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101160201-fa700km","updated":"20241101160228"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"192.168.1.230  k8s-master.cluster.local k8s-master\n192.168.1.229  k8s-node1.cluster.local k8s-node1\n192.168.1.228  k8s-node2.cluster.local k8s-node2\n192.168.1.230  lb.kubesphere.local\n192.168.1.108  k8s-node3  #新增节点\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241101115500-sf5ny5w","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NC4=","Num":4},"Properties":{"id":"20241101115500-sf5ny5w","updated":"20241101115500"},"Children":[{"ID":"20241101115500-s1j943l","Type":"NodeParagraph","Properties":{"id":"20241101115500-s1j943l","updated":"20241101160147"},"Children":[{"Type":"NodeText","Data":"kubeSphere部署配置文件config-sample.yaml修改增加新节点信息,其他不变"}]},{"ID":"20241101160109-de5no1v","Type":"NodeBlockquote","Properties":{"id":"20241101160109-de5no1v","updated":"20241101160118"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101160118-u2mbsxm","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101160118-u2mbsxm","updated":"20241101160140"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"apiVersion: kubekey.kubesphere.io/v1alpha2\nkind: Cluster\nmetadata:\n  name: sample\nspec:\n  hosts:\n  - {name: k8s-master, address: 192.168.1.230, internalAddress: 192.168.1.230, user: root, password: \"root\"}\n  - {name: k8s-node1, address: 192.168.1.229, internalAddress: 192.168.1.229, user: root, password: \"root\"}\n  - {name: k8s-node2, address: 192.168.1.228, internalAddress: 192.168.1.228, user: root, password: \"root\"}\n  - {name: k8s-node3, address: 192.168.1.108, internalAddress: 192.168.1.108, user: root, password: \"root\"} # 新增节点\n  roleGroups:\n    etcd:\n    - k8s-master\n    control-plane: \n    - k8s-master\n    worker:\n    - k8s-node1\n    - k8s-node2\n    - k8s-node3 # 新增节点\n  controlPlaneEndpoint:\n    ## Internal loadbalancer for apiservers \n    # internalLoadbalancer: haproxy\n\n    domain: lb.kubesphere.local\n    address: \"\"\n    port: 6443\n\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]},{"ID":"20241101160100-9re4u6o","Type":"NodeParagraph","Properties":{"id":"20241101160100-9re4u6o","updated":"20241101160100"}}]},{"ID":"20241101114354-uc8ntxa","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"NS4=","Num":5},"Properties":{"id":"20241101114354-uc8ntxa","updated":"20241101114354"},"Children":[{"ID":"20241101114354-gngmzj5","Type":"NodeParagraph","Properties":{"id":"20241101114354-gngmzj5","updated":"20241101160239"},"Children":[{"Type":"NodeText","Data":"执行增加节点"}]},{"ID":"20241101160243-w7zd09v","Type":"NodeBlockquote","Properties":{"id":"20241101160243-w7zd09v","updated":"20241101160244"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101160244-k6f1nxj","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101160244-k6f1nxj","updated":"20241101160514"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"./kk add nodes -f config-sample.yaml\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]},{"ID":"20241101160241-ui0lxiy","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ni4=","Num":6},"Properties":{"id":"20241101160241-ui0lxiy","updated":"20241101161437"},"Children":[{"ID":"20241101160241-a3137sl","Type":"NodeParagraph","Properties":{"id":"20241101160241-a3137sl","updated":"20241101161421"},"Children":[{"Type":"NodeText","Data":"查看节点"}]},{"ID":"20241101161422-bkf7vjc","Type":"NodeBlockquote","Properties":{"id":"20241101161422-bkf7vjc","updated":"20241101161437"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101161423-08hpzc0","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101161423-08hpzc0","updated":"20241101161437"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"kubectl get node\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241101114302-r64h14k","Type":"NodeParagraph","Properties":{"id":"20241101114302-r64h14k","updated":"20241101161507"},"Children":[{"Type":"NodeText","Data":"       "},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"1730448893475"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/1730448893475-20241101161507-pklsr8x.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241101114221-2cuue7c","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241101114221-2cuue7c","updated":"20241101170004"},"Children":[{"ID":"20241101165904-d6qzrgi","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Ny4=","Num":7},"Properties":{"id":"20241101165904-d6qzrgi","updated":"20241101170004"},"Children":[{"ID":"20241101165904-jq1jewm","Type":"NodeParagraph","Properties":{"id":"20241101165904-jq1jewm","updated":"20241101165906"},"Children":[{"Type":"NodeText","Data":"删除节点"}]},{"ID":"20241101165942-t0ll2oo","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101165942-t0ll2oo","updated":"20241101170004"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"./kk delete node 删除的节点名称 -f 部署配置文件\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20241101165906-ihyug8y","Type":"NodeBlockquote","Properties":{"id":"20241101165906-ihyug8y","updated":"20241101165937"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e"},{"ID":"20241101165908-5y6td37","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20241101165908-5y6td37","updated":"20241101165937"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"./kk delete node k8s-node3 -f config-sample.yaml\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]}]}]}]},{"ID":"20241101175046-lvmb42s","Type":"NodeParagraph","Properties":{"id":"20241101175046-lvmb42s","updated":"20241101175046"}}]}